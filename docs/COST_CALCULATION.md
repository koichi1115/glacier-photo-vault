# Glacier Photo Vault - ランニングコスト計算書

**計算日**: 2025年1月
**対象規模**: 10ユーザー × 500GB = 5TB（5,000GB）
**リージョン**: US East (N. Virginia) - us-east-1

---

## 📊 前提条件

### ユーザー・データ規模
- **ユーザー数**: 10人
- **1ユーザーあたりのストレージ**: 500GB
- **合計ストレージ**: 5TB = 5,000GB

### データ特性
- **平均ファイルサイズ**: 5MB（写真・動画）
- **総ファイル数**: 5,000GB ÷ 5MB ≈ **1,024,000ファイル**
- **メタデータJSON**: 1ユーザーあたり約50MB（サムネイル含む）

### 使用パターン
- **初月**: 全データ（5TB）をアップロード
- **以降の月**: 月間50GB追加アップロード（全ユーザー合計）
- **リストア頻度**: 月間100ファイル（約500MB）をStandard層で12時間後に復元
- **ダウンロード**: 復元後、月間500MB をインターネット経由でダウンロード

---

## 💰 コスト詳細（月額）

### 1. S3 Glacier Deep Archive ストレージコスト

**料金**: $0.00099/GB/月（US East）

| 項目 | 容量 | 料金 | 月額コスト |
|------|------|------|-----------|
| Glacier Deep Archive ストレージ | 5,000 GB | $0.00099/GB | **$4.95** |

---

### 2. S3 メタデータ（STANDARD）ストレージコスト

メタデータJSON（`{userId}/metadata.json`）はSTANDARDストレージクラスを使用。

**料金**: $0.023/GB/月（最初の50TB、US East）

| 項目 | 容量 | 料金 | 月額コスト |
|------|------|------|-----------|
| メタデータJSON（10ユーザー × 50MB） | 0.5 GB | $0.023/GB | **$0.01** |

---

### 3. S3 APIリクエストコスト

#### 3-1. 初月（全データアップロード）

**PutObject（アップロード）**: $0.05/1,000リクエスト（Glacier Deep Archive）

| 項目 | リクエスト数 | 料金 | コスト |
|------|-------------|------|-------|
| 写真アップロード（1,024,000ファイル） | 1,024,000 | $0.05/1,000 | **$51.20** |
| メタデータJSON保存（10ユーザー × 平均10回更新） | 100 | $0.05/1,000 | **$0.01** |
| **初月合計** | | | **$51.21** |

#### 3-2. 通常月（50GB追加アップロード）

**ファイル数**: 50GB ÷ 5MB ≈ 10,240ファイル

| 項目 | リクエスト数 | 料金 | 月額コスト |
|------|-------------|------|-----------|
| 写真アップロード（10,240ファイル） | 10,240 | $0.05/1,000 | **$0.51** |
| メタデータJSON保存（10ユーザー × 平均5回更新） | 50 | $0.05/1,000 | **$0.00** |
| **通常月合計** | | | **$0.51** |

#### 3-3. リストアリクエスト

**RestoreObject（Standard層）**: $0.020/1,000リクエスト

| 項目 | リクエスト数 | 料金 | 月額コスト |
|------|-------------|------|-----------|
| リストアリクエスト（100ファイル） | 100 | $0.020/1,000 | **$0.00** |

#### 3-4. GetObject（ダウンロード）

**GetObject**: $0.0004/1,000リクエスト（Glacier Deep Archive）

| 項目 | リクエスト数 | 料金 | 月額コスト |
|------|-------------|------|-----------|
| 復元ファイルダウンロード（100ファイル） | 100 | $0.0004/1,000 | **$0.00** |
| メタデータJSON読み込み（10ユーザー × 30日 × 1回/日） | 300 | $0.0004/1,000 | **$0.00** |

---

### 4. データリストアコスト

**Glacier Deep Archive → Standard層（12時間）**: $0.0025/GB

| 項目 | データ量 | 料金 | 月額コスト |
|------|---------|------|-----------|
| リストアデータ（100ファイル × 5MB = 500MB） | 0.5 GB | $0.0025/GB | **$0.00** |

**注意**: リストア後、データは一時的にS3 Standardストレージに保存されます（7日間）。

**一時STANDARDストレージ**: $0.023/GB/月

| 項目 | データ量 | 期間 | 料金 | 月額コスト |
|------|---------|------|------|-----------|
| 復元データ（7日間保存） | 0.5 GB × 7日/30日 | 0.12 GB-月 | $0.023/GB | **$0.00** |

---

### 5. データ転送コスト

**インターネットへのデータ転送（Outbound）**:

- 最初の10TB/月: $0.09/GB
- 次の40TB/月: $0.085/GB
- 以降: $0.07/GB

**無料枠**: 月間100GBまで無料

| 項目 | データ量 | 料金 | 月額コスト |
|------|---------|------|-----------|
| ダウンロード（500MB） | 0.5 GB | 無料枠内 | **$0.00** |

---

### 6. CloudWatch Logsコスト

**料金**:
- ログ取り込み: $0.50/GB
- ログ保存: $0.03/GB/月

**想定ログ量**: 月間1GB（全ユーザー合計）

| 項目 | データ量 | 料金 | 月額コスト |
|------|---------|------|-----------|
| ログ取り込み | 1 GB | $0.50/GB | **$0.50** |
| ログ保存（30日保持） | 1 GB | $0.03/GB | **$0.03** |
| **CloudWatch合計** | | | **$0.53** |

**注意**: 月間5GBまで無料枠があります（新規AWSアカウントの場合）。

---

### 7. S3アクセスログコスト

**S3アクセスログストレージ**: $0.023/GB/月（STANDARD）

**想定ログ量**: 月間500MB（圧縮後）

| 項目 | データ量 | 料金 | 月額コスト |
|------|---------|------|-----------|
| アクセスログ保存 | 0.5 GB | $0.023/GB | **$0.01** |

---

## 📈 月額コスト総計

### 初月（全データアップロード時）

| カテゴリ | コスト |
|---------|-------|
| Glacier Deep Archive ストレージ | $4.95 |
| メタデータ（STANDARD）ストレージ | $0.01 |
| APIリクエスト（アップロード） | $51.21 |
| リストア | $0.00 |
| データ転送 | $0.00 |
| CloudWatch Logs | $0.53 |
| S3アクセスログ | $0.01 |
| **初月合計** | **$56.71** |

### 通常月（定常運用時）

| カテゴリ | コスト |
|---------|-------|
| Glacier Deep Archive ストレージ | $4.95 |
| メタデータ（STANDARD）ストレージ | $0.01 |
| APIリクエスト（追加アップロード） | $0.51 |
| リストア | $0.00 |
| データ転送 | $0.00 |
| CloudWatch Logs | $0.53 |
| S3アクセスログ | $0.01 |
| **通常月合計** | **$6.01** |

---

## 🎯 年間コスト見積もり

```
初月: $56.71
2ヶ月目〜12ヶ月目: $6.01 × 11ヶ月 = $66.11

年間合計: $56.71 + $66.11 = $122.82 ≈ $123
```

**日本円換算**（1ドル = 150円の場合）:
- **初月**: ¥8,507
- **通常月**: ¥902/月
- **年間**: ¥18,450

---

## 💡 コスト最適化のヒント

### 1. ストレージコストの最適化

**現在**: $4.95/月（5TB）
**最適化後**: 変更不要（Glacier Deep Archiveは既に最安クラス）

| ストレージクラス | 料金/GB/月 | 5TBの月額コスト | 備考 |
|----------------|-----------|---------------|------|
| S3 Standard | $0.023 | $115.00 | ❌ 高すぎる |
| S3 Intelligent-Tiering | $0.0125〜$0.023 | $62.50〜$115.00 | ❌ 高すぎる |
| S3 Glacier Flexible Retrieval | $0.0036 | $18.00 | △ 取り出しが遅い |
| **S3 Glacier Deep Archive** | **$0.00099** | **$4.95** | ✅ **最安** |

### 2. メタデータストレージの最適化

**オプション1**: サムネイルをさらに圧縮（WebP形式など）
**オプション2**: 頻繁にアクセスされないサムネイルをGlacierに移行

### 3. CloudWatch Logsの最適化

- **ログレベルの調整**: ERRORとSECURITYイベントのみCloudWatchに送信
- **保持期間の短縮**: 30日 → 14日（重要度の低いログ）
- **コスト削減見込み**: $0.53 → $0.30/月

### 4. リストア頻度の最適化

**現在の想定**: 月間100ファイル（500MB）
**最適化**: バッチリストア（複数ファイルを一度にリストア）でリクエスト数削減

### 5. 無料枠の活用

**AWSアカウント無料枠（12ヶ月間）**:
- S3 Standard: 5GB/月
- CloudWatch Logs: 5GB/月
- データ転送（Out）: 100GB/月

---

## 📊 他サービスとのコスト比較

### 1ユーザーあたり500GB（5TB合計）のコスト比較

| サービス | 月額料金 | 年間料金 | 備考 |
|---------|---------|---------|------|
| **Glacier Photo Vault** | **$6.01** | **$123** | ✅ 最安 |
| Google Drive（Business Standard） | $60.00 | $720 | 2TB/ユーザー（10ユーザー必要） |
| Dropbox Business | $120.00 | $1,440 | 3TB/ユーザー（10ユーザー必要） |
| Microsoft OneDrive（Business Plan 2） | $100.00 | $1,200 | 無制限（10ユーザー） |
| Backblaze B2（5TB） | $30.00 | $360 | ストレージのみ、転送料金別 |
| Wasabi（5TB） | $29.90 | $358.80 | ストレージのみ |

**結論**: Glacier Photo Vaultは**年間$123（約¥18,000）**で、他のクラウドストレージサービスと比較して**約1/3〜1/10のコスト**を実現。

---

## ⚠️ 注意事項

### 1. 最低保存期間

Glacier Deep Archiveには**180日間の最低保存期間**があります。180日未満で削除した場合、残日数分の料金が請求されます。

### 2. リストア時間

- **Standard層**: 12時間以内
- **Bulk層**: 48時間以内

緊急のアクセスには不向きです。

### 3. データ取得料金

大量のデータを頻繁に取り出す場合、リストア料金とデータ転送料金が高額になる可能性があります。

**例**: 1TBを毎月リストアする場合
- リストア料金: 1,000GB × $0.0025 = $2.50
- データ転送（100GB超過分900GB）: 900GB × $0.09 = $81.00
→ 合計 $83.50/月の追加コスト

### 4. 料金変動

AWS料金は予告なく変更される場合があります。最新料金は[AWS公式サイト](https://aws.amazon.com/s3/pricing/)を確認してください。

---

## 🔗 参考リンク

- [AWS S3 Glacier Deep Archive 料金](https://aws.amazon.com/s3/pricing/)
- [AWS 料金計算ツール](https://calculator.aws/)
- [AWS 無料利用枠](https://aws.amazon.com/free/)
- [CloudWatch Logs 料金](https://aws.amazon.com/cloudwatch/pricing/)

---

**最終更新**: 2025年1月
**計算者**: Claude Code（AI Assistant）
**レビュー推奨**: 本番運用前に最新のAWS料金を確認してください
